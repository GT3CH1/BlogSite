@model Posts
@{
    ViewData["Title"] = Model.Title;
    Layout = "_Layout";
}

<!DOCTYPE html>

<html>
<body >
<div>
    <div>
        <br/>
        <h2>@Model.Title</h2>
        <br/>
        <hr/>
        <br/>
        <div class="w3-mobile">
            @Html.Raw(Model.Content)
        </div>
    </div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"></script>
<script>
$(document).ready(function (){
        $("code").addClass("line-numbers");
        $("pre").attr("data-src","/js/prism.js");

        Prism.highlightAll();
		});

//
// al pre tags on the page
const pres = document.getElementsByTagName("pre")

//
// reformat html of pre tags
if (pres !== null ) {
  for (let i = 0; i < pres.length; i++) {
    // check if its a pre tag with a prism class
    if (isPrismClass(pres[i])) {
      // insert code and copy element
      pres[i].innerHTML = `<div class="copy w3-button w3-small" style="float:right">Copy</div><code class="${pres[i].className}">${pres[i].innerHTML}</code>`      
    }
  }
}

//
// create clipboard for every copy element
const clipboard = new Clipboard('.copy', {
  target: (trigger) => {
    return trigger.nextElementSibling;
  }
});

//
// do stuff when copy is clicked
clipboard.on('success', (event) => {
  event.trigger.textContent = 'Copied!';
  setTimeout(() => {
    event.clearSelection();
    event.trigger.textContent = 'Copy';
  }, 2000);
});

//
// helper function
function isPrismClass(preTag) { 
  return preTag.className.substring(0, 8) === 'language'
}

</script>
</html>